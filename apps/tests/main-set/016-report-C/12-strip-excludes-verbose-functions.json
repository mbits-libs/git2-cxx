{
    "args": "report $DATA/strip-excludes/coverage-5.json -f strip-excludes -o ignored -- -vv --os l-cars --compiler gcc",
    "expected": [
        0,
        "",
        [
            "verbose: ON",
            "markers: l-cars and gcc.",
            "sources: $TMP/repo",
            "-- a/b/c/d/file.cc:4",
            "     0 | \u001b[2;49;30m}  // GCOV_EXCL_LINE\u001b[m",
            "-- a/b/c/d/file.cc:8",
            "       | \u001b[2;49;30m\t// GCOV_EXCL_START\u001b[m",
            "       | \u001b[2;49;30m\tfoo();\u001b[m",
            "       | \u001b[2;49;30m\tfoo();\u001b[m",
            "       | \u001b[2;49;30m\tfoo();\u001b[m",
            "       | \u001b[2;49;30m\t// GCOV_EXCL_STOP\u001b[m",
            "-- a/b/c/d/file.cc:17",
            "     2 | \u001b[2;49;30m\t// GCOV_EXCL_START\u001b[m",
            "     3 | \u001b[2;49;30m\tfoo();\u001b[m",
            "       | \u001b[2;49;30m\t// GCOV_EXCL_STOP\u001b[m",
            "-- a/b/c/d/file.cc:24",
            "       | \u001b[2;49;30m// GCOV_EXCL_START\u001b[m",
            "       | \u001b[2;49;30mvoid fully_hidden(std::string const&) {\u001b[m",
            "     1 | \u001b[2;49;30m\tfoo();\u001b[m",
            "     2 | \u001b[2;49;30m\tfoo();\u001b[m",
            "     3 | \u001b[2;49;30m\tfoo();\u001b[m",
            "     4 | \u001b[2;49;30m\tfoo();\u001b[m",
            "     5 | \u001b[2;49;30m}\u001b[m",
            "       | \u001b[2;49;30m// GCOV_EXCL_STOP\u001b[m",
            "-- a/b/c/d/file.cc:33",
            "       | \u001b[2;49;30m// GCOV_EXCL_START\u001b[m",
            "       | \u001b[2;49;30mvoid start_hidden(std::vector<int>) {\u001b[m",
            "       | \u001b[2;49;30m\tfoo();\u001b[m",
            "       | \u001b[2;49;30m\tfoo();\u001b[m",
            "       | \u001b[2;49;30m\t// GCOV_EXCL_STOP\u001b[m",
            "-- a/b/c/d/file.cc:45",
            "       | \u001b[2;49;30m\t// GCOV_EXCL_START\u001b[m",
            "       | \u001b[2;49;30m\tfoo();\u001b[m",
            "       | \u001b[2;49;30m\tfoo();\u001b[m",
            "       | \u001b[2;49;30m}\u001b[m",
            "       | \u001b[2;49;30m// GCOV_EXCL_STOP\u001b[m",
            "-- a/b/c/d/file.cc:51",
            "       | \u001b[2;49;30m// GCOV_EXCL_START\u001b[m",
            "       | \u001b[2;49;30mvoid block_hidden(std::string const&) {\u001b[m",
            "       | \u001b[2;49;30m\tfoo();\u001b[m",
            "       | \u001b[2;49;30m\tfoo();\u001b[m",
            "       | \u001b[2;49;30m\t// GCOV_EXCL_STOP\u001b[m",
            "-- a/b/c/d/file.cc:57",
            "       | \u001b[2;49;30m\t// GCOV_EXCL_START\u001b[m",
            "       | \u001b[2;49;30m\tfoo();\u001b[m",
            "       | \u001b[2;49;30m\tfoo();\u001b[m",
            "       | \u001b[2;49;30m}\u001b[m",
            "       | \u001b[2;49;30m// GCOV_EXCL_STOP\u001b[m",
            "-- a/b/c/d/file.cc:63",
            "       | \u001b[2;49;30m// GCOV_EXCL_START\u001b[m",
            "       | \u001b[2;49;30mvoid empty_line_hidden(std::string const&) {\u001b[m",
            "       | \u001b[2;49;30m\tfoo();\u001b[m",
            "       | \u001b[2;49;30m\tfoo();\u001b[m",
            "-- a/b/c/d/file.cc:68",
            "       | \u001b[2;49;30m\tfoo();\u001b[m",
            "       | \u001b[2;49;30m\tfoo();\u001b[m",
            "       | \u001b[2;49;30m}\u001b[m",
            "       | \u001b[2;49;30m// GCOV_EXCL_STOP\u001b[m",
            "strip-excludes: excluded 8 lines and 3 functions.\n"
        ]
    ],
    "prepare": [
        "unpack $DATA/repo.git.tar $TMP",
        "cd '$TMP'",
        "git clone repo.git",
        "cd repo",
        "cov init",
        "mkdirs a/b/c/d",
        "cp '$DATA/strip-excludes/file-3' 'a/b/c/d/file.cc'"
    ]
}
